<%= content_for :extra_css do %>
  <style>
    .emerald-accent { color: #10B981; }
    .emerald-bg { background-color: #10B981; }
    .emerald-bg-light { background-color: #D1FAE5; }
    .emerald-border { border-color: #10B981; }
  </style>
<% end %>

<div class="min-h-screen bg-gray-50">
  <!-- Hero Section -->
  <div class="bg-white border-b border-gray-100">
    <div class="max-w-4xl mx-auto px-4 py-16">
      <div class="text-center">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">
          ì¹œêµ¬ ì¶”ì²œìœ¼ë¡œ <span class="emerald-accent">ë¬´ë£Œ í¬ë ˆë”§</span> ë°›ê¸°
        </h1>
        <p class="text-gray-600 text-lg">
          ì¹œêµ¬ë¥¼ ì´ˆëŒ€í•˜ê³  ì„œë¡œì—ê²Œ ë„ì›€ì´ ë˜ëŠ” ì„ ë¬¼ì„ ì£¼ì„¸ìš”
        </p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-4xl mx-auto px-4 py-12">
    <!-- Referral Link Section -->
    <div class="bg-white rounded-xl shadow-sm p-8 mb-8">
      <h2 class="font-semibold text-gray-900 mb-6 text-lg">ë‚˜ì˜ ì¶”ì²œ ë§í¬</h2>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">
            ê³µìœ  ë§í¬
          </label>
          <div class="flex gap-3">
            <input type="text" 
                   id="referralLink" 
                   value="<%= @referral_url %>" 
                   readonly 
                   class="flex-1 px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-700 focus:ring-2 focus:ring-emerald-500 focus:border-transparent">
            <button onclick="copyReferralLink()" 
                    class="px-6 py-3 emerald-bg hover:bg-emerald-600 text-white rounded-lg font-medium transition-colors">
              ë³µì‚¬
            </button>
          </div>
          <p class="text-sm text-gray-500 mt-2">
            ì´ ë§í¬ë¡œ ê°€ì…í•œ ì¹œêµ¬ë§ˆë‹¤ 3ê±´ì˜ í¬ë ˆë”§ì„ ë°›ìŠµë‹ˆë‹¤
          </p>
        </div>

        <!-- Share Buttons -->
        <div class="pt-4">
          <p class="text-sm font-medium text-gray-700 mb-3">ê³µìœ í•˜ê¸°</p>
          <div class="flex gap-3">
            <button onclick="shareKakao()" 
                    class="flex-1 py-3 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
              ì¹´ì¹´ì˜¤í†¡
            </button>
            <button onclick="shareUrl()" 
                    class="flex-1 py-3 border border-gray-200 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
              ë§í¬ ê³µìœ 
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- How It Works -->
    <div class="bg-white rounded-xl shadow-sm p-8 mb-8">
      <h2 class="font-semibold text-gray-900 mb-6 text-lg">ì´ìš© ë°©ë²•</h2>
      
      <div class="grid md:grid-cols-3 gap-6">
        <div class="text-center">
          <div class="w-12 h-12 emerald-bg-light rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="font-bold emerald-accent text-lg">1</span>
          </div>
          <h3 class="font-medium text-gray-900 mb-1">ë§í¬ ê³µìœ </h3>
          <p class="text-sm text-gray-600">ì¶”ì²œ ë§í¬ë¥¼ ì¹œêµ¬ì—ê²Œ ì „ë‹¬í•©ë‹ˆë‹¤</p>
        </div>
        
        <div class="text-center">
          <div class="w-12 h-12 emerald-bg-light rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="font-bold emerald-accent text-lg">2</span>
          </div>
          <h3 class="font-medium text-gray-900 mb-1">ì¹œêµ¬ ê°€ì…</h3>
          <p class="text-sm text-gray-600">ì¹œêµ¬ê°€ ë§í¬ë¡œ íšŒì›ê°€ì…ì„ ì™„ë£Œí•©ë‹ˆë‹¤</p>
        </div>
        
        <div class="text-center">
          <div class="w-12 h-12 emerald-bg-light rounded-full flex items-center justify-center mx-auto mb-3">
            <span class="font-bold emerald-accent text-lg">3</span>
          </div>
          <h3 class="font-medium text-gray-900 mb-1">í¬ë ˆë”§ ì§€ê¸‰</h3>
          <p class="text-sm text-gray-600">ì–‘ìª½ ëª¨ë‘ 3ê±´ì˜ í¬ë ˆë”§ì„ ë°›ìŠµë‹ˆë‹¤</p>
        </div>
      </div>
    </div>

    <!-- Benefits -->
    <div class="grid md:grid-cols-2 gap-6 mb-8">
      <div class="bg-white rounded-xl shadow-sm p-6">
        <h3 class="font-semibold text-gray-900 mb-4">ì¹œêµ¬ê°€ ë°›ëŠ” í˜œíƒ</h3>
        <ul class="space-y-3 text-sm text-gray-600">
          <li class="flex items-start">
            <span class="emerald-accent mr-2 mt-0.5">âœ“</span>
            <span>íšŒì›ê°€ì… ì‹œ ë¬´ë£Œ 3ê±´ ë¶„ì„</span>
          </li>
          <li class="flex items-start">
            <span class="emerald-accent mr-2 mt-0.5">âœ“</span>
            <span>AI ê¸°ë°˜ ìì†Œì„œ ì‹¬ì¸µ ë¶„ì„</span>
          </li>
          <li class="flex items-start">
            <span class="emerald-accent mr-2 mt-0.5">âœ“</span>
            <span>ì±„ìš©ê³µê³  & ê¸°ì—… ë¶„ì„</span>
          </li>
        </ul>
      </div>
      
      <div class="bg-white rounded-xl shadow-sm p-6">
        <h3 class="font-semibold text-gray-900 mb-4">ë‚˜ì˜ í˜œíƒ</h3>
        <ul class="space-y-3 text-sm text-gray-600">
          <li class="flex items-start">
            <span class="emerald-accent mr-2 mt-0.5">âœ“</span>
            <span>ì¹œêµ¬ë‹¹ 3ê±´ í¬ë ˆë”§ ì¦‰ì‹œ ì§€ê¸‰</span>
          </li>
          <li class="flex items-start">
            <span class="emerald-accent mr-2 mt-0.5">âœ“</span>
            <span>ë¬´ì œí•œ ì¶”ì²œ ê°€ëŠ¥</span>
          </li>
          <li class="flex items-start">
            <span class="emerald-accent mr-2 mt-0.5">âœ“</span>
            <span>í¬ë ˆë”§ ì˜êµ¬ ë³´ê´€</span>
          </li>
        </ul>
      </div>
    </div>

    <!-- Recent Referrals -->
    <% if @recent_referrals.any? %>
    <div class="bg-white rounded-xl shadow-sm p-8 mb-8">
      <h2 class="font-semibold text-gray-900 mb-6 text-lg">ìµœê·¼ ì¶”ì²œ í˜„í™©</h2>
      
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead class="border-b border-gray-100">
            <tr>
              <th class="text-left text-sm font-medium text-gray-700 pb-3">ë‚ ì§œ</th>
              <th class="text-left text-sm font-medium text-gray-700 pb-3">ì¹œêµ¬</th>
              <th class="text-right text-sm font-medium text-gray-700 pb-3">í¬ë ˆë”§</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-50">
            <% @recent_referrals.each do |referral| %>
            <tr>
              <td class="py-3 text-sm text-gray-600">
                <%= referral.created_at.in_time_zone('Seoul').strftime('%m/%d') %>
              </td>
              <td class="py-3 text-sm text-gray-900">
                <%= referral.email.split('@').first[0..2] + '***' %>
              </td>
              <td class="py-3 text-sm font-medium text-right emerald-accent">
                +3
              </td>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <% end %>

    <!-- Pricing Section with TossPayments Integration -->
    <% content_for :head do %>
      <script src="https://js.tosspayments.com/v2/standard"></script>
    <% end %>
    
    <div class="bg-gradient-to-br from-emerald-50 to-white rounded-xl shadow-sm p-8 mb-8">
      <h2 class="font-semibold text-gray-900 mb-6 text-lg text-center">ìš”ê¸ˆì œ ì•ˆë‚´</h2>
      <p class="text-center text-gray-600 mb-8">ì¶”ì²œìœ¼ë¡œ ë°›ì€ í¬ë ˆë”§ì´ ë¶€ì¡±í•˜ë‹¤ë©´ í•©ë¦¬ì ì¸ ìš”ê¸ˆì œë¥¼ ì´ìš©í•´ë³´ì„¸ìš”</p>
      
      <div class="grid md:grid-cols-3 gap-6">
        <!-- Free Plan -->
        <div class="bg-white rounded-xl p-6 border border-gray-200 relative">
          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
            <span class="bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full font-medium">ë¬´ë£Œ</span>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2 mt-2">ë¬´ë£Œ</h3>
          <div class="mb-4">
            <span class="text-3xl font-bold text-gray-900">â‚©0</span>
            <span class="text-gray-500">/ 3ê±´</span>
          </div>
          <ul class="space-y-3 mb-6 text-sm text-gray-600">
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ìì†Œì„œ ë¶„ì„ 3ê±´ ë¬´ë£Œ
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ê¸°ë³¸ AI ë¶„ì„
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸/URL ë¶„ì„
            </li>
          </ul>
          <button class="w-full py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium" disabled>
            ë°”ë¡œ ì‹œì‘í•˜ê¸°
          </button>
        </div>

        <!-- 10-Pack Plan -->
        <div class="bg-white rounded-xl p-6 border-2 border-emerald-500 relative transform scale-105 shadow-lg">
          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
            <span class="bg-emerald-500 text-white text-xs px-3 py-1 rounded-full font-medium">ê°€ì¥ ì¸ê¸°</span>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2 mt-2">10ê±´ íŒ¨í‚¤ì§€</h3>
          <div class="mb-4">
            <span class="text-3xl font-bold text-gray-900">â‚©20,000</span>
            <span class="text-gray-500">/ 10ê±´</span>
          </div>
          <p class="text-xs text-gray-500 mb-4">ê±´ë‹¹ ì•½ â‚©2,000</p>
          <ul class="space-y-3 mb-6 text-sm text-gray-600">
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              <strong>ìì†Œì„œ ë¶„ì„ 10ê±´</strong>
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ê³ ê¸‰ ë¶„ì„ ë¦¬í¬íŠ¸
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ë¶„ì„ ê²°ê³¼ ì €ì¥ & ë¹„êµ
            </li>
          </ul>
          <button id="buy10PackBtn" class="w-full py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors text-sm font-medium">
            10ê±´ íŒ¨í‚¤ì§€ êµ¬ë§¤
          </button>
        </div>

        <!-- Premium Plan -->
        <div class="bg-white rounded-xl p-6 border border-gray-200 relative">
          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
            <span class="bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full font-medium">í”„ë¦¬ë¯¸ì—„</span>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2 mt-2">í”„ë¦¬ë¯¸ì—„ ì»¨ì„¤íŒ…</h3>
          <div class="mb-4">
            <span class="text-3xl font-bold text-gray-900">â‚©500,000</span>
          </div>
          <ul class="space-y-3 mb-6 text-sm text-gray-600">
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ì „ë‹´ ì»¨ì„¤í„´íŠ¸ 1:1 ì½”ì¹­(ì˜¨ë¼ì¸)
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ìì†Œì„œ ì™„ì„±ê¹Œì§€ ë¬´ì œí•œ í”¼ë“œë°±
            </li>
            <li class="flex items-center">
              <svg class="w-4 h-4 text-emerald-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
              </svg>
              ê¸°ì—…Â·ì§ë¬´ ë§ì¶¤ ì „ëµ ìˆ˜ë¦½
            </li>
          </ul>
          <button class="w-full py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-medium">
            í”„ë¦¬ë¯¸ì—„ ìƒë‹´ ì‹ ì²­
          </button>
        </div>
      </div>

      <!-- Special Offer -->
      <div class="mt-8 bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg p-6 text-center">
        <p class="text-sm font-medium text-gray-700 mb-2">ğŸ‰ íŠ¹ë³„ í˜œíƒ</p>
        <p class="text-gray-600 text-sm">ì¹œêµ¬ ì¶”ì²œìœ¼ë¡œ ë°›ì€ í¬ë ˆë”§ê³¼ í•¨ê»˜ ì‚¬ìš© ê°€ëŠ¥!</p>
        <p class="text-xs text-gray-500 mt-2">ì¶”ì²œ í¬ë ˆë”§ì„ ë¨¼ì € ì‚¬ìš© í›„ êµ¬ë§¤ í¬ë ˆë”§ì´ ì°¨ê°ë©ë‹ˆë‹¤</p>
      </div>
    </div>
    
    <!-- Purchase Confirm Modal -->
    <div id="purchaseModal" class="fixed inset-0 z-50 hidden">
      <div class="absolute inset-0 bg-gray-900/50 backdrop-blur-sm"></div>
      <div class="relative mx-auto max-w-md w-[90%] md:w-full top-28">
        <div class="bg-white rounded-2xl shadow-xl ring-1 ring-gray-900/5 overflow-hidden">
          <div class="px-6 py-5 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white">
            <div class="flex items-center justify-between">
              <h3 class="text-base font-semibold">ê²°ì œ í™•ì¸</h3>
              <button id="modalClose" class="p-1.5 rounded-full hover:bg-white/10 focus:outline-none">
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
              </button>
            </div>
          </div>
          <div class="px-6 py-6 space-y-2">
            <p class="text-sm text-gray-600">ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ ê²°ì œë¥¼ ì§„í–‰í• ê¹Œìš”?</p>
            <div class="mt-3 grid grid-cols-1 gap-3">
              <div class="flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3">
                <span class="text-sm text-gray-600">ìƒí’ˆ</span>
                <span id="modalProduct" class="text-sm font-medium text-gray-900">-</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg px-4 py-3">
                <span class="text-sm text-gray-600">ê²°ì œê¸ˆì•¡</span>
                <span class="text-sm font-bold text-gray-900"><span id="modalAmount">-</span>ì›</span>
              </div>
            </div>
          </div>
          <div class="px-6 pb-6">
            <div class="flex gap-2">
              <button id="modalCancel" class="flex-1 h-11 rounded-full border border-gray-200 text-gray-700 font-medium hover:bg-gray-50 transition-colors">ì·¨ì†Œ</button>
              <button id="modalConfirm" class="flex-1 h-11 rounded-full bg-emerald-500 text-white font-semibold hover:bg-emerald-600 transition-colors shadow-sm">ê²°ì œ ì§„í–‰</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const buy10Btn = document.getElementById('buy10PackBtn');
        const modal = document.getElementById('purchaseModal');
        const modalClose = document.getElementById('modalClose');
        const modalCancel = document.getElementById('modalCancel');
        const modalConfirm = document.getElementById('modalConfirm');
        const productEl = document.getElementById('modalProduct');
        const amountEl = document.getElementById('modalAmount');
        
        if (!buy10Btn) {
          console.error('Buy button not found');
          return;
        }
        
        const csrf = () => document.querySelector('meta[name="csrf-token"]')?.content;
        const open = () => {
          console.log('Opening modal');
          modal?.classList.remove('hidden');
        };
        const close = () => {
          console.log('Closing modal');
          modal?.classList.add('hidden');
        };
        
        let pendingOrder = null;
        
        buy10Btn.addEventListener('click', async (e) => {
          e.preventDefault();
          console.log('Buy button clicked');
          
          try {
            const response = await fetch('/pricing/purchase_pack', { 
              method: 'POST', 
              headers: { 
                'X-CSRF-Token': csrf(),
                'Content-Type': 'application/json',
                'Accept': 'application/json'
              },
              credentials: 'same-origin'
            });
            
            console.log('Response status:', response.status);
            
            if (!response.ok) {
              if (response.status === 401) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '/users/sign_in';
                return;
              }
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            console.log('Response data:', data);
            
            if (!data.success) { 
              alert('ê²°ì œ ì¤€ë¹„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.'); 
              return; 
            }
            
            pendingOrder = data;
            productEl.textContent = data.orderName;
            amountEl.textContent = data.amount.toLocaleString();
            modal.dataset.orderId = data.orderId;
            modal.dataset.amount = String(data.amount);
            open();
          } catch (e) {
            console.error('Error:', e);
            alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
          }
        });
        
        modalClose?.addEventListener('click', close);
        modalCancel?.addEventListener('click', close);
        
        modalConfirm?.addEventListener('click', async () => {
          if (!pendingOrder) {
            console.error('No pending order');
            return;
          }
          
          console.log('Confirm payment clicked');
          close();
          
          try {
            // Initialize TossPayments
            const clientKey = '<%= ENV['TOSS_CLIENT_KEY'] || 'test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq' %>';
            console.log('Using client key:', clientKey.substring(0, 10) + '...');
            
            const tossPayments = TossPayments(clientKey);
            const payment = tossPayments.payment({
              customerKey: pendingOrder.customerKey
            });
            
            console.log('Requesting payment with:', {
              orderId: pendingOrder.orderId,
              orderName: pendingOrder.orderName,
              amount: pendingOrder.amount
            });
            
            // Request payment
            await payment.requestPayment({
              method: 'CARD',
              amount: {
                value: pendingOrder.amount,
                currency: 'KRW',
              },
              orderId: pendingOrder.orderId,
              orderName: pendingOrder.orderName,
              successUrl: window.location.origin + '/pricing/success',
              failUrl: window.location.origin + '/pricing/fail',
            });
          } catch (error) {
            console.error('Payment error:', error);
            alert('ê²°ì œ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
          }
        });
      });
    </script>

    <!-- FAQ -->
    <div class="bg-white rounded-xl shadow-sm p-8">
      <h2 class="font-semibold text-gray-900 mb-6 text-lg">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>
      
      <div class="space-y-4">
        <details class="group">
          <summary class="cursor-pointer list-none flex justify-between items-center font-medium text-gray-900 py-3 border-b border-gray-100 hover:text-emerald-600 transition-colors">
            ì¶”ì²œ íšŸìˆ˜ì— ì œí•œì´ ìˆë‚˜ìš”?
            <span class="transition group-open:rotate-180 text-gray-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </span>
          </summary>
          <p class="pt-3 text-sm text-gray-600">
            ì•„ë‹ˆìš”. ì¶”ì²œ íšŸìˆ˜ëŠ” ë¬´ì œí•œì…ë‹ˆë‹¤. ì›í•˜ëŠ” ë§Œí¼ ì¹œêµ¬ë¥¼ ì´ˆëŒ€í•˜ì„¸ìš”.
          </p>
        </details>

        <details class="group">
          <summary class="cursor-pointer list-none flex justify-between items-center font-medium text-gray-900 py-3 border-b border-gray-100 hover:text-emerald-600 transition-colors">
            í¬ë ˆë”§ì€ ì–¸ì œ ì§€ê¸‰ë˜ë‚˜ìš”?
            <span class="transition group-open:rotate-180 text-gray-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </span>
          </summary>
          <p class="pt-3 text-sm text-gray-600">
            ì¹œêµ¬ê°€ íšŒì›ê°€ì…ì„ ì™„ë£Œí•˜ë©´ ì¦‰ì‹œ 3ê±´ì˜ í¬ë ˆë”§ì´ ìë™ ì§€ê¸‰ë©ë‹ˆë‹¤.
          </p>
        </details>

        <details class="group">
          <summary class="cursor-pointer list-none flex justify-between items-center font-medium text-gray-900 py-3 hover:text-emerald-600 transition-colors">
            í¬ë ˆë”§ ìœ íš¨ê¸°ê°„ì´ ìˆë‚˜ìš”?
            <span class="transition group-open:rotate-180 text-gray-400">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </span>
          </summary>
          <p class="pt-3 text-sm text-gray-600">
            ì¶”ì²œìœ¼ë¡œ ë°›ì€ í¬ë ˆë”§ì€ ìœ íš¨ê¸°ê°„ ì—†ì´ ì˜êµ¬ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
          </p>
        </details>
      </div>
    </div>
  </div>
</div>

<script>
  function copyReferralLink() {
    const input = document.getElementById('referralLink');
    input.select();
    document.execCommand('copy');
    
    // ë²„íŠ¼ í”¼ë“œë°±
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = 'ë³µì‚¬ë¨!';
    setTimeout(() => {
      button.textContent = originalText;
    }, 2000);
  }

  function shareKakao() {
    const url = document.getElementById('referralLink').value;
    const text = 'AI ìì†Œì„œ ë¶„ì„ ì„œë¹„ìŠ¤ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. ì§€ê¸ˆ ê°€ì…í•˜ë©´ ë¬´ë£Œ 3ê±´!';
    window.open(`https://story.kakao.com/share?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`);
  }

  function shareUrl() {
    const url = document.getElementById('referralLink').value;
    if (navigator.share) {
      navigator.share({
        title: 'ìì†Œì„œ ë„ìš°ë¯¸ ì¶”ì²œ',
        text: 'AI ìì†Œì„œ ë¶„ì„ ì„œë¹„ìŠ¤ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.',
        url: url
      });
    } else {
      copyReferralLink();
    }
  }
</script>